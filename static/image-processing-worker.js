!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["image-processing-worker"]=e():n["image-processing-worker"]=e()}(this,function(){return function(n){var e={};function r(t){if(e[t])return e[t].exports;var o=e[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=e,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="",r(r.s=4)}([function(n,e,r){n.exports=r.p+"mozjpeg_enc.93395.wasm"},function(n,e,r){(function(n,t){var o;function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var a,u=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,o=void 0!==(e=e||{})?e:{},u={};for(t in o)o.hasOwnProperty(t)&&(u[t]=o[t]);o.arguments=[],o.thisProgram="./this.program",o.quit=function(n,e){throw e},o.preRun=[],o.postRun=[];var f=!1,l=!1,c=!1,s=!1;f="object"===("undefined"==typeof window?"undefined":i(window)),l="function"==typeof importScripts,c="object"===("undefined"==typeof process?"undefined":i(process))&&!f&&!l,s=!f&&!c&&!l;var p,d,y="";function m(n){return o.locateFile?o.locateFile(n,y):y+n}c?(y=n+"/",o.read=function(n,e){var t;return p||(p=r(!function(){var n=new Error("Cannot find module 'fs'");throw n.code="MODULE_NOT_FOUND",n}())),d||(d=r(3)),n=d.normalize(n),t=p.readFileSync(n),e?t:t.toString()},o.readBinary=function(n){var e=o.read(n,!0);return e.buffer||(e=new Uint8Array(e)),O(e.buffer),e},process.argv.length>1&&(o.thisProgram=process.argv[1].replace(/\\/g,"/")),o.arguments=process.argv.slice(2),process.on("uncaughtException",function(n){if(!(n instanceof sr))throw n}),process.on("unhandledRejection",yr),o.quit=function(n){process.exit(n)},o.inspect=function(){return"[Emscripten Module object]"}):s?("undefined"!=typeof read&&(o.read=function(n){return read(n)}),o.readBinary=function(n){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(n)):(O("object"===i(e=read(n,"binary"))),e)},"undefined"!=typeof scriptArgs?o.arguments=scriptArgs:void 0!==arguments&&(o.arguments=arguments),"function"==typeof quit&&(o.quit=function(n){quit(n)})):(f||l)&&(l?y=self.location.href:document.currentScript&&(y=document.currentScript.src),a&&(y=a),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",o.read=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},l&&(o.readBinary=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o.readAsync=function(n,e,r){var t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="arraybuffer",t.onload=function(){200==t.status||0==t.status&&t.response?e(t.response):r()},t.onerror=r,t.send(null)},o.setWindowTitle=function(n){document.title=n});var v=o.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),g=o.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||v);for(t in u)u.hasOwnProperty(t)&&(o[t]=u[t]);u=void 0;var h=16;function _(n){var e=V;return V=V+n+15&-16,e}function E(n){var e=k[Q>>2],r=e+n+15&-16;return k[Q>>2]=r,r>=un&&!on()?(k[Q>>2]=e,0):e}function b(n,e){return e||(e=h),n=Math.ceil(n/e)*e}var w={"f64-rem":function(n,e){return n%e},debugger:function(){}},T=(new Array(0),1024),A=!1;function O(n,e){n||yr("Assertion failed: "+e)}function C(n){return q?mn?cr(n):E(n):_(n)}function S(n,e){if(0===e||!n)return"";for(var r,t=0,o=0;t|=r=D[n+o>>0],(0!=r||e)&&(o++,!e||o!=e););e||(e=o);var i="";if(t<128){for(var a;e>0;)a=String.fromCharCode.apply(String,D.subarray(n,n+Math.min(e,1024))),i=i?i+a:a,n+=1024,e-=1024;return i}return R(n)}var N="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function P(n,e){for(var r=e;n[r];)++r;if(r-e>16&&n.subarray&&N)return N.decode(n.subarray(e,r));for(var t,o,i,a,u,f="";;){if(!(t=n[e++]))return f;if(128&t)if(o=63&n[e++],192!=(224&t))if(i=63&n[e++],224==(240&t)?t=(15&t)<<12|o<<6|i:(a=63&n[e++],240==(248&t)?t=(7&t)<<18|o<<12|i<<6|a:(u=63&n[e++],t=248==(252&t)?(3&t)<<24|o<<18|i<<12|a<<6|u:(1&t)<<30|o<<24|i<<18|a<<12|u<<6|63&n[e++])),t<65536)f+=String.fromCharCode(t);else{var l=t-65536;f+=String.fromCharCode(55296|l>>10,56320|1023&l)}else f+=String.fromCharCode((31&t)<<6|o);else f+=String.fromCharCode(t)}}function R(n){return P(D,n)}function I(n,e,r,t){if(!(t>0))return 0;for(var o=r,i=r+t-1,a=0;a<n.length;++a){var u=n.charCodeAt(a);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&n.charCodeAt(++a)),u<=127){if(r>=i)break;e[r++]=u}else if(u<=2047){if(r+1>=i)break;e[r++]=192|u>>6,e[r++]=128|63&u}else if(u<=65535){if(r+2>=i)break;e[r++]=224|u>>12,e[r++]=128|u>>6&63,e[r++]=128|63&u}else if(u<=2097151){if(r+3>=i)break;e[r++]=240|u>>18,e[r++]=128|u>>12&63,e[r++]=128|u>>6&63,e[r++]=128|63&u}else if(u<=67108863){if(r+4>=i)break;e[r++]=248|u>>24,e[r++]=128|u>>18&63,e[r++]=128|u>>12&63,e[r++]=128|u>>6&63,e[r++]=128|63&u}else{if(r+5>=i)break;e[r++]=252|u>>30,e[r++]=128|u>>24&63,e[r++]=128|u>>18&63,e[r++]=128|u>>12&63,e[r++]=128|u>>6&63,e[r++]=128|63&u}}return e[r]=0,r-o}function L(n,e,r){return I(n,D,e,r)}function M(n){for(var e=0,r=0;r<n.length;++r){var t=n.charCodeAt(r);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&n.charCodeAt(++r)),t<=127?++e:e+=t<=2047?2:t<=65535?3:t<=2097151?4:t<=67108863?5:6}return e}function F(n){var e=M(n)+1,r=cr(e);return r&&I(n,B,r,e),r}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var W,B,D,U,j,k,x,z,G,H,V,q,K,Y,X,Q,Z=65536,J=16777216,$=16777216;function nn(n,e){return n%e>0&&(n+=e-n%e),n}function en(n){o.buffer=W=n}function rn(){o.HEAP8=B=new Int8Array(W),o.HEAP16=U=new Int16Array(W),o.HEAP32=k=new Int32Array(W),o.HEAPU8=D=new Uint8Array(W),o.HEAPU16=j=new Uint16Array(W),o.HEAPU32=x=new Uint32Array(W),o.HEAPF32=z=new Float32Array(W),o.HEAPF64=G=new Float64Array(W)}function tn(){yr("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+un+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function on(){var n=o.usingWasm?Z:J,e=2147483648-n;if(k[Q>>2]>e)return!1;var r=un;for(un=Math.max(un,$);un<k[Q>>2];)un=un<=536870912?nn(2*un,n):Math.min(nn((3*un+2147483648)/4,n),e);var t=o.reallocBuffer(un);return t&&t.byteLength==un?(en(t),rn(),!0):(un=r,!1)}H=V=K=Y=X=Q=0,q=!1,o.reallocBuffer||(o.reallocBuffer=function(n){var e;try{var r=B;e=new ArrayBuffer(n),new Int8Array(e).set(r)}catch(n){return!1}return!!fr(e)&&e});try{Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get)(new ArrayBuffer(4))}catch(n){}var an=o.TOTAL_STACK||5242880,un=o.TOTAL_MEMORY||16777216;function fn(){return un}function ln(n){for(;n.length>0;){var e=n.shift();if("function"!=typeof e){var r=e.func;"number"==typeof r?void 0===e.arg?o.dynCall_v(r):o.dynCall_vi(r,e.arg):r(void 0===e.arg?null:e.arg)}else e()}}un<an&&g("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+un+"! (TOTAL_STACK="+an+")"),o.buffer?W=o.buffer:("object"===("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&"function"==typeof WebAssembly.Memory?(o.wasmMemory=new WebAssembly.Memory({initial:un/Z}),W=o.wasmMemory.buffer):W=new ArrayBuffer(un),o.buffer=W),rn();var cn=[],sn=[],pn=[],dn=[],yn=[],mn=!1;function vn(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)bn(o.preRun.shift());ln(cn)}function gn(){mn||(mn=!0,ln(sn))}function hn(){ln(pn)}function _n(){ln(dn)}function En(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)wn(o.postRun.shift());ln(yn)}function bn(n){cn.unshift(n)}function wn(n){yn.unshift(n)}function Tn(n,e,r){for(var t=0;t<n.length;++t)B[e++>>0]=n.charCodeAt(t);r||(B[e>>0]=0)}var An=0,On=null,Cn=null;function Sn(n){An++,o.monitorRunDependencies&&o.monitorRunDependencies(An)}function Nn(n){if(An--,o.monitorRunDependencies&&o.monitorRunDependencies(An),0==An&&(null!==On&&(clearInterval(On),On=null),Cn)){var e=Cn;Cn=null,e()}}o.preloadedImages={},o.preloadedAudios={};var Pn="data:application/octet-stream;base64,";function Rn(n){return String.prototype.startsWith?n.startsWith(Pn):0===n.indexOf(Pn)}function In(){var n="mozjpeg_enc.wast",e="mozjpeg_enc.wasm",r="mozjpeg_enc.temp.asm.js";Rn(n)||(n=m(n)),Rn(e)||(e=m(e)),Rn(r)||(r=m(r));var t={global:null,env:null,asm2wasm:w,parent:o},a=null;function u(){try{if(o.wasmBinary)return new Uint8Array(o.wasmBinary);if(o.readBinary)return o.readBinary(e);throw"both async and sync fetching of the wasm failed"}catch(n){yr(n)}}function c(n,r,c){if("object"!==("undefined"==typeof WebAssembly?"undefined":i(WebAssembly)))return g("no native wasm support detected"),!1;if(!(o.wasmMemory instanceof WebAssembly.Memory))return g("no native wasm Memory in use"),!1;function s(n,e){(a=n.exports).memory&&function(n){var e=o.buffer;n.byteLength<e.byteLength&&g("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(e);new Int8Array(n).set(r),en(n),rn()}(a.memory),o.asm=a,o.usingWasm=!0,Nn()}if(r.memory=o.wasmMemory,t.global={NaN:NaN,Infinity:1/0},t["global.Math"]=Math,t.env=r,Sn(),o.instantiateWasm)try{return o.instantiateWasm(t,s)}catch(n){return g("Module.instantiateWasm callback failed with error: "+n),!1}function p(n){s(n.instance,n.module)}function d(n){(o.wasmBinary||!f&&!l||"function"!=typeof fetch?new Promise(function(n,e){n(u())}):fetch(e,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+e+"'";return n.arrayBuffer()}).catch(function(){return u()})).then(function(n){return WebAssembly.instantiate(n,t)}).then(n,function(n){g("failed to asynchronously prepare wasm: "+n),yr(n)})}return o.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||Rn(e)||"function"!=typeof fetch?d(p):WebAssembly.instantiateStreaming(fetch(e,{credentials:"same-origin"}),t).then(p,function(n){g("wasm streaming compile failed: "+n),g("falling back to ArrayBuffer instantiation"),d(p)}),{}}o.asmPreload=o.asm;var s=o.reallocBuffer;o.reallocBuffer=function(n){return"asmjs"===p?s(n):function(n){n=nn(n,o.usingWasm?Z:J);var e=o.buffer.byteLength;if(o.usingWasm)try{return-1!==o.wasmMemory.grow((n-e)/65536)?o.buffer=o.wasmMemory.buffer:null}catch(n){return null}}(n)};var p="";o.asm=function(n,e,r){var t;if(!(e=e).table){var a=o.wasmTableSize;void 0===a&&(a=1024);var u=o.wasmMaxTableSize;"object"===("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&"function"==typeof WebAssembly.Table?e.table=void 0!==u?new WebAssembly.Table({initial:a,maximum:u,element:"anyfunc"}):new WebAssembly.Table({initial:a,element:"anyfunc"}):e.table=new Array(a),o.wasmTable=e.table}return e.memoryBase||(e.memoryBase=o.STATIC_BASE),e.tableBase||(e.tableBase=0),O(t=c(0,e),"no binaryen method succeeded."),t}}In(),V=(H=T)+90288,sn.push({func:function(){ir()}},{func:function(){or()}},{func:function(){ar()}});var Ln=90288;o.STATIC_BASE=H,o.STATIC_BUMP=Ln,V+=16;var Mn={};function Fn(n){var e,r;Fn.called?(r=k[n>>2],e=k[r>>2]):(Fn.called=!0,Mn.USER=Mn.LOGNAME="web_user",Mn.PATH="/",Mn.PWD="/",Mn.HOME="/home/web_user",Mn.LANG="C.UTF-8",Mn._=o.thisProgram,e=C(1024),r=C(256),k[r>>2]=e,k[n>>2]=r);var t=[],i=0;for(var a in Mn)if("string"==typeof Mn[a]){var u=a+"="+Mn[a];t.push(u),i+=u.length}if(i>1024)throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");for(var f=0;f<t.length;f++)Tn(u=t[f],e),k[r+4*f>>2]=e,e+=u.length+1;k[r+4*t.length>>2]=0}var Wn={varargs:0,get:function(n){return Wn.varargs+=4,k[Wn.varargs-4>>2]},getStr:function(){return S(Wn.get())},get64:function(){var n=Wn.get(),e=Wn.get();return O(n>=0?0===e:-1===e),n},getZero:function(){O(0===Wn.get())}};function Bn(n,e){Wn.varargs=e;try{var r=Wn.getStreamFromFD(),t=(Wn.get(),Wn.get()),o=Wn.get(),i=Wn.get(),a=t;return FS.llseek(r,a,i),k[o>>2]=r.position,r.getdents&&0===a&&0===i&&(r.getdents=null),0}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||yr(n),-n.errno}}function Dn(n,e){Wn.varargs=e;try{var r=Wn.get(),t=Wn.get(),o=Wn.get(),i=0;Dn.buffers||(Dn.buffers=[null,[],[]],Dn.printChar=function(n,e){var r=Dn.buffers[n];O(r),0===e||10===e?((1===n?v:g)(P(r,0)),r.length=0):r.push(e)});for(var a=0;a<o;a++){for(var u=k[t+8*a>>2],f=k[t+(8*a+4)>>2],l=0;l<f;l++)Dn.printChar(r,D[u+l]);i+=f}return i}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||yr(n),-n.errno}}function Un(n,e){Wn.varargs=e;try{var r=Wn.getStreamFromFD();return FS.close(r),0}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||yr(n),-n.errno}}var jn={};function kn(n){for(;n.length;){var e=n.pop();n.pop()(e)}}function xn(n){return this.fromWireType(x[n>>2])}var zn={},Gn={},Hn={},Vn=48,qn=57;function Kn(n){if(void 0===n)return"_unknown";var e=(n=n.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=Vn&&e<=qn?"_"+n:n}function Yn(n,e){return n=Kn(n),new Function("body","return function "+n+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function Xn(n,e){var r=Yn(e,function(n){this.name=e,this.message=n;var r=new Error(n).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Qn=void 0;function Zn(n){throw new Qn(n)}function Jn(n,e,r){function t(e){var t=r(e);t.length!==n.length&&Zn("Mismatched type converter count");for(var o=0;o<n.length;++o)ae(n[o],t[o])}n.forEach(function(n){Hn[n]=e});var o=new Array(e.length),i=[],a=0;e.forEach(function(n,e){Gn.hasOwnProperty(n)?o[e]=Gn[n]:(i.push(n),zn.hasOwnProperty(n)||(zn[n]=[]),zn[n].push(function(){o[e]=Gn[n],++a===i.length&&t(o)}))}),0===i.length&&t(o)}function $n(n){var e=jn[n];delete jn[n];var r=e.rawConstructor,t=e.rawDestructor,o=e.fields;Jn([n],o.map(function(n){return n.getterReturnType}).concat(o.map(function(n){return n.setterArgumentType})),function(n){var i={};return o.forEach(function(e,r){var t=e.fieldName,a=n[r],u=e.getter,f=e.getterContext,l=n[r+o.length],c=e.setter,s=e.setterContext;i[t]={read:function(n){return a.fromWireType(u(f,n))},write:function(n,e){var r=[];c(s,n,l.toWireType(r,e)),kn(r)}}}),[{name:e.name,fromWireType:function(n){var e={};for(var r in i)e[r]=i[r].read(n);return t(n),e},toWireType:function(n,e){for(var o in i)if(!(o in e))throw new TypeError("Missing field");var a=r();for(o in i)i[o].write(a,e[o]);return null!==n&&n.push(t,a),a},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:t}]})}function ne(n){switch(n){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+n)}}function ee(){for(var n=new Array(256),e=0;e<256;++e)n[e]=String.fromCharCode(e);re=n}var re=void 0;function te(n){for(var e="",r=n;D[r];)e+=re[D[r++]];return e}var oe=void 0;function ie(n){throw new oe(n)}function ae(n,e,r){if(r=r||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=e.name;if(n||ie('type "'+t+'" must have a positive integer typeid pointer'),Gn.hasOwnProperty(n)){if(r.ignoreDuplicateRegistrations)return;ie("Cannot register type '"+t+"' twice")}if(Gn[n]=e,delete Hn[n],zn.hasOwnProperty(n)){var o=zn[n];delete zn[n],o.forEach(function(n){n()})}}function ue(n,e,r,t,o){var i=ne(r);ae(n,{name:e=te(e),fromWireType:function(n){return!!n},toWireType:function(n,e){return e?t:o},argPackAdvance:8,readValueFromPointer:function(n){var t;if(1===r)t=B;else if(2===r)t=U;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+e);t=k}return this.fromWireType(t[n>>i])},destructorFunction:null})}var fe=[],le=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ce(n){n>4&&0==--le[n].refcount&&(le[n]=void 0,fe.push(n))}function se(){for(var n=0,e=5;e<le.length;++e)void 0!==le[e]&&++n;return n}function pe(){for(var n=5;n<le.length;++n)if(void 0!==le[n])return le[n];return null}function de(){o.count_emval_handles=se,o.get_first_emval=pe}function ye(n){switch(n){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=fe.length?fe.pop():le.length;return le[e]={refcount:1,value:n},e}}function me(n,e){ae(n,{name:e=te(e),fromWireType:function(n){var e=le[n].value;return ce(n),e},toWireType:function(n,e){return ye(e)},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:null})}function ve(n){if(null===n)return"null";var e=i(n);return"object"===e||"array"===e||"function"===e?n.toString():""+n}function ge(n,e){switch(e){case 2:return function(n){return this.fromWireType(z[n>>2])};case 3:return function(n){return this.fromWireType(G[n>>3])};default:throw new TypeError("Unknown float type: "+n)}}function he(n,e,r){var t=ne(r);ae(n,{name:e=te(e),fromWireType:function(n){return n},toWireType:function(n,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+ve(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:ge(e,t),destructorFunction:null})}function _e(n,e){if(!(n instanceof Function))throw new TypeError("new_ called with constructor type "+i(n)+" which is not a function");var r=Yn(n.name||"unknownFunctionName",function(){});r.prototype=n.prototype;var t=new r,o=n.apply(t,e);return o instanceof Object?o:t}function Ee(n,e,r,t,o){var i=e.length;i<2&&ie("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==e[1]&&null!==r,u=!1,f=1;f<e.length;++f)if(null!==e[f]&&void 0===e[f].destructorFunction){u=!0;break}var l="void"!==e[0].name,c="",s="";for(f=0;f<i-2;++f)c+=(0!==f?", ":"")+"arg"+f,s+=(0!==f?", ":"")+"arg"+f+"Wired";var p="return function "+Kn(n)+"("+c+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+n+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";u&&(p+="var destructors = [];\n");var d=u?"destructors":"null",y=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[ie,t,o,kn,e[0],e[1]];for(a&&(p+="var thisWired = classParam.toWireType("+d+", this);\n"),f=0;f<i-2;++f)p+="var arg"+f+"Wired = argType"+f+".toWireType("+d+", arg"+f+"); // "+e[f+2].name+"\n",y.push("argType"+f),m.push(e[f+2]);if(a&&(s="thisWired"+(s.length>0?", ":"")+s),p+=(l?"var rv = ":"")+"invoker(fn"+(s.length>0?", ":"")+s+");\n",u)p+="runDestructors(destructors);\n";else for(f=a?1:2;f<e.length;++f){var v=1===f?"thisWired":"arg"+(f-2)+"Wired";null!==e[f].destructorFunction&&(p+=v+"_dtor("+v+"); // "+e[f].name+"\n",y.push(v+"_dtor"),m.push(e[f].destructorFunction))}return l&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",y.push(p),_e(Function,y).apply(null,m)}function be(n,e,r){if(void 0===n[e].overloadTable){var t=n[e];n[e]=function(){return n[e].overloadTable.hasOwnProperty(arguments.length)||ie("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+n[e].overloadTable+")!"),n[e].overloadTable[arguments.length].apply(this,arguments)},n[e].overloadTable=[],n[e].overloadTable[t.argCount]=t}}function we(n,e,r){o.hasOwnProperty(n)?((void 0===r||void 0!==o[n].overloadTable&&void 0!==o[n].overloadTable[r])&&ie("Cannot register public name '"+n+"' twice"),be(o,n,n),o.hasOwnProperty(r)&&ie("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),o[n].overloadTable[r]=e):(o[n]=e,void 0!==r&&(o[n].numArguments=r))}function Te(n,e){for(var r=[],t=0;t<n;t++)r.push(k[(e>>2)+t]);return r}function Ae(n,e,r){o.hasOwnProperty(n)||Zn("Replacing nonexistant public symbol"),void 0!==o[n].overloadTable&&void 0!==r?o[n].overloadTable[r]=e:(o[n]=e,o[n].argCount=r)}function Oe(n,e){var r;if(n=te(n),void 0!==o["FUNCTION_TABLE_"+n])r=o["FUNCTION_TABLE_"+n][e];else if("undefined"!=typeof FUNCTION_TABLE)r=FUNCTION_TABLE[e];else{var t=o.asm["dynCall_"+n];void 0===t&&void 0===(t=o.asm["dynCall_"+n.replace(/f/g,"d")])&&ie("No dynCall invoker for signature: "+n),r=function(r){for(var t=[],o=1;o<n.length;++o)t.push("a"+o);var i="return function dynCall_"+n+"_"+e+"("+t.join(", ")+") {\n";return i+="    return dynCall(rawFunction"+(t.length?", ":"")+t.join(", ")+");\n",i+="};\n",new Function("dynCall","rawFunction",i)(r,e)}(t)}return"function"!=typeof r&&ie("unknown function pointer with signature "+n+": "+e),r}var Ce=void 0;function Se(n){var e=ur(n),r=te(e);return lr(e),r}function Ne(n,e){var r=[],t={};throw e.forEach(function n(e){t[e]||Gn[e]||(Hn[e]?Hn[e].forEach(n):(r.push(e),t[e]=!0))}),new Ce(n+": "+r.map(Se).join([", "]))}function Pe(n,e,r,t,o,i){var a=Te(e,r);n=te(n),o=Oe(t,o),we(n,function(){Ne("Cannot call "+n+" due to unbound types",a)},e-1),Jn([],a,function(r){var t=[r[0],null].concat(r.slice(1));return Ae(n,Ee(n,t,null,o,i),e-1),[]})}function Re(n,e,r){switch(e){case 0:return r?function(n){return B[n]}:function(n){return D[n]};case 1:return r?function(n){return U[n>>1]}:function(n){return j[n>>1]};case 2:return r?function(n){return k[n>>2]}:function(n){return x[n>>2]};default:throw new TypeError("Unknown integer type: "+n)}}function Ie(n,e,r,t,o){e=te(e),-1===o&&(o=4294967295);var i=ne(r),a=function(n){return n};if(0===t){var u=32-8*r;a=function(n){return n<<u>>>u}}var f=-1!=e.indexOf("unsigned");ae(n,{name:e,fromWireType:a,toWireType:function(n,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+ve(r)+'" to '+this.name);if(r<t||r>o)throw new TypeError('Passing a number "'+ve(r)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+t+", "+o+"]!");return f?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:Re(e,i,0!==t),destructorFunction:null})}function Le(n,e,r){var t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function o(n){var e=x,r=e[n>>=2],o=e[n+1];return new t(e.buffer,o,r)}ae(n,{name:r=te(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function Me(n,e){var r="std::string"===(e=te(e));ae(n,{name:e,fromWireType:function(n){var e,t=x[n>>2];if(r){var o=D[n+4+t],i=0;0!=o&&(i=o,D[n+4+t]=0);for(var a=n+4,u=0;u<=t;++u){var f=n+4+u;if(0==D[f]){var l=R(a);void 0===e?e=l:(e+=String.fromCharCode(0),e+=l),a=f+1}}0!=i&&(D[n+4+t]=i)}else{var c=new Array(t);for(u=0;u<t;++u)c[u]=String.fromCharCode(D[n+4+u]);e=c.join("")}return lr(n),e},toWireType:function(n,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t="string"==typeof e;t||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||ie("Cannot pass non-string to std::string");var o=(r&&t?function(){return M(e)}:function(){return e.length})(),i=cr(4+o+1);if(x[i>>2]=o,r&&t)L(e,i+4,o+1);else if(t)for(var a=0;a<o;++a){var u=e.charCodeAt(a);u>255&&(lr(i),ie("String has UTF-16 code units that do not fit in 8 bits")),D[i+4+a]=u}else for(a=0;a<o;++a)D[i+4+a]=e[a];return null!==n&&n.push(lr,i),i},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:function(n){lr(n)}})}function Fe(n,e,r){var t,o;r=te(r),2===e?(t=function(){return j},o=1):4===e&&(t=function(){return x},o=2),ae(n,{name:r,fromWireType:function(n){for(var e=t(),r=x[n>>2],i=new Array(r),a=n+4>>o,u=0;u<r;++u)i[u]=String.fromCharCode(e[a+u]);return lr(n),i.join("")},toWireType:function(n,r){var i=t(),a=r.length,u=cr(4+a*e);x[u>>2]=a;for(var f=u+4>>o,l=0;l<a;++l)i[f+l]=r.charCodeAt(l);return null!==n&&n.push(lr,u),u},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:function(n){lr(n)}})}function We(n,e,r,t,o,i){jn[n]={name:te(e),rawConstructor:Oe(r,t),rawDestructor:Oe(o,i),fields:[]}}function Be(n,e,r,t,o,i,a,u,f,l){jn[n].fields.push({fieldName:te(e),getterReturnType:r,getter:Oe(t,o),getterContext:i,setterArgumentType:a,setter:Oe(u,f),setterContext:l})}function De(n,e){ae(n,{isVoid:!0,name:e=te(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(n,e){}})}function Ue(n){n>4&&(le[n].refcount+=1)}function je(n,e){var r=Gn[n];return void 0===r&&ie(e+" has unknown type "+Se(n)),r}function ke(n,e){return ye((n=je(n,"_emval_take_value")).readValueFromPointer(e))}function xe(){o.abort()}function ze(n){dr(n)}function Ge(n){ze(n)}function He(n){return 0===n?0:(n=S(n),Mn.hasOwnProperty(n)?(He.ret&&lr(He.ret),He.ret=F(Mn[n]),He.ret):0)}function Ve(n){return Math.pow(2,n)}function qe(){return Ve.apply(null,arguments)}function Ke(n,e,r){return D.set(D.subarray(e,e+r),n),n}var Ye={};function Xe(n){return Ye[n]||0}var Qe=1,Ze={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function Je(n,e){return 0==n?Ze.EINVAL:(k[n>>2]=Qe,Ye[Qe]=0,Qe++,0)}function $e(n,e){$e.seen||($e.seen={}),n in $e.seen||(o.dynCall_v(e),$e.seen[n]=1)}function nr(n,e){return n in Ye?(Ye[n]=e,0):Ze.EINVAL}function er(n){return o.___errno_location&&(k[o.___errno_location()>>2]=n),n}Qn=o.InternalError=Xn(Error,"InternalError"),ee(),oe=o.BindingError=Xn(Error,"BindingError"),de(),Ce=o.UnboundTypeError=Xn(Error,"UnboundTypeError"),Q=_(4),K=Y=b(V),X=b(K+an),k[Q>>2]=X,q=!0,o.wasmTableSize=212,o.wasmMaxTableSize=212,o.asmGlobalArg={},o.asmLibraryArg={abort:yr,enlargeMemory:on,getTotalMemory:fn,abortOnCannotGrowMemory:tn,___buildEnvironment:Fn,___setErrNo:er,___syscall140:Bn,___syscall146:Dn,___syscall6:Un,__embind_finalize_value_object:$n,__embind_register_bool:ue,__embind_register_emval:me,__embind_register_float:he,__embind_register_function:Pe,__embind_register_integer:Ie,__embind_register_memory_view:Le,__embind_register_std_string:Me,__embind_register_std_wstring:Fe,__embind_register_value_object:We,__embind_register_value_object_field:Be,__embind_register_void:De,__emval_decref:ce,__emval_incref:Ue,__emval_take_value:ke,_abort:xe,_emscripten_memcpy_big:Ke,_exit:Ge,_getenv:He,_llvm_exp2_f64:qe,_pthread_getspecific:Xe,_pthread_key_create:Je,_pthread_once:$e,_pthread_setspecific:nr,DYNAMICTOP_PTR:Q,STACKTOP:Y};var rr=o.asm(o.asmGlobalArg,o.asmLibraryArg,W);o.asm=rr;var tr,or=o.__GLOBAL__sub_I_bind_cpp=function(){return o.asm.__GLOBAL__sub_I_bind_cpp.apply(null,arguments)},ir=o.__GLOBAL__sub_I_mozjpeg_enc_cpp=function(){return o.asm.__GLOBAL__sub_I_mozjpeg_enc_cpp.apply(null,arguments)},ar=o.___emscripten_environ_constructor=function(){return o.asm.___emscripten_environ_constructor.apply(null,arguments)},ur=(o.___errno_location=function(){return o.asm.___errno_location.apply(null,arguments)},o.___getTypeName=function(){return o.asm.___getTypeName.apply(null,arguments)}),fr=o._emscripten_replace_memory=function(){return o.asm._emscripten_replace_memory.apply(null,arguments)},lr=o._free=function(){return o.asm._free.apply(null,arguments)},cr=o._malloc=function(){return o.asm._malloc.apply(null,arguments)};function sr(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function pr(n){function e(){o.calledRun||(o.calledRun=!0,A||(gn(),hn(),o.onRuntimeInitialized&&o.onRuntimeInitialized(),En()))}n=n||o.arguments,An>0||(vn(),An>0||o.calledRun||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()))}function dr(n,e){e&&o.noExitRuntime&&0===n||(o.noExitRuntime||(A=!0,Y=tr,_n(),o.onExit&&o.onExit(n)),o.quit(n,new sr(n)))}function yr(n){throw o.onAbort&&o.onAbort(n),void 0!==n?(v(n),g(n),n=JSON.stringify(n)):n="",A=!0,"abort("+n+"). Build with -s ASSERTIONS=1 for more info."}if(o.dynCall_i=function(){return o.asm.dynCall_i.apply(null,arguments)},o.dynCall_ii=function(){return o.asm.dynCall_ii.apply(null,arguments)},o.dynCall_iii=function(){return o.asm.dynCall_iii.apply(null,arguments)},o.dynCall_iiii=function(){return o.asm.dynCall_iiii.apply(null,arguments)},o.dynCall_iiiii=function(){return o.asm.dynCall_iiiii.apply(null,arguments)},o.dynCall_iiiiii=function(){return o.asm.dynCall_iiiiii.apply(null,arguments)},o.dynCall_iiiiiii=function(){return o.asm.dynCall_iiiiiii.apply(null,arguments)},o.dynCall_v=function(){return o.asm.dynCall_v.apply(null,arguments)},o.dynCall_vi=function(){return o.asm.dynCall_vi.apply(null,arguments)},o.dynCall_vii=function(){return o.asm.dynCall_vii.apply(null,arguments)},o.dynCall_viii=function(){return o.asm.dynCall_viii.apply(null,arguments)},o.dynCall_viiii=function(){return o.asm.dynCall_viiii.apply(null,arguments)},o.dynCall_viiiii=function(){return o.asm.dynCall_viiiii.apply(null,arguments)},o.dynCall_viiiiii=function(){return o.asm.dynCall_viiiiii.apply(null,arguments)},o.dynCall_viiiiiii=function(){return o.asm.dynCall_viiiiiii.apply(null,arguments)},o.dynCall_viiiiiiii=function(){return o.asm.dynCall_viiiiiiii.apply(null,arguments)},o.asm=rr,o.then=function(n){if(o.calledRun)n(o);else{var e=o.onRuntimeInitialized;o.onRuntimeInitialized=function(){e&&e(),n(o)}}return o},sr.prototype=new Error,sr.prototype.constructor=sr,Cn=function n(){o.calledRun||pr(),o.calledRun||(Cn=n)},o.run=pr,o.abort=yr,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return o.noExitRuntime=!0,pr(),e});"object"===i(e)&&"object"===i(t)?t.exports=u:void 0===(o=function(){return u}.apply(e,[]))||(t.exports=o)}).call(this,"/",r(2)(n))},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){function r(n,e){for(var r=0,t=n.length-1;t>=0;t--){var o=n[t];"."===o?n.splice(t,1):".."===o?(n.splice(t,1),r++):r&&(n.splice(t,1),r--)}if(e)for(;r--;r)n.unshift("..");return n}function t(n,e){if(n.filter)return n.filter(e);for(var r=[],t=0;t<n.length;t++)e(n[t],t,n)&&r.push(n[t]);return r}e.resolve=function(){for(var n="",e=!1,o=arguments.length-1;o>=-1&&!e;o--){var i=o>=0?arguments[o]:process.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,e="/"===i.charAt(0))}return(e?"/":"")+(n=r(t(n.split("/"),function(n){return!!n}),!e).join("/"))||"."},e.normalize=function(n){var i=e.isAbsolute(n),a="/"===o(n,-1);return(n=r(t(n.split("/"),function(n){return!!n}),!i).join("/"))||i||(n="."),n&&a&&(n+="/"),(i?"/":"")+n},e.isAbsolute=function(n){return"/"===n.charAt(0)},e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(t(n,function(n,e){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))},e.relative=function(n,r){function t(n){for(var e=0;e<n.length&&""===n[e];e++);for(var r=n.length-1;r>=0&&""===n[r];r--);return e>r?[]:n.slice(e,r-e+1)}n=e.resolve(n).substr(1),r=e.resolve(r).substr(1);for(var o=t(n.split("/")),i=t(r.split("/")),a=Math.min(o.length,i.length),u=a,f=0;f<a;f++)if(o[f]!==i[f]){u=f;break}var l=[];for(f=u;f<o.length;f++)l.push("..");return(l=l.concat(i.slice(u))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(n){if("string"!=typeof n&&(n+=""),0===n.length)return".";for(var e=n.charCodeAt(0),r=47===e,t=-1,o=!0,i=n.length-1;i>=1;--i)if(47===(e=n.charCodeAt(i))){if(!o){t=i;break}}else o=!1;return-1===t?r?"/":".":r&&1===t?"/":n.slice(0,t)},e.basename=function(n,e){var r=function(n){"string"!=typeof n&&(n+="");var e,r=0,t=-1,o=!0;for(e=n.length-1;e>=0;--e)if(47===n.charCodeAt(e)){if(!o){r=e+1;break}}else-1===t&&(o=!1,t=e+1);return-1===t?"":n.slice(r,t)}(n);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(n){"string"!=typeof n&&(n+="");for(var e=-1,r=0,t=-1,o=!0,i=0,a=n.length-1;a>=0;--a){var u=n.charCodeAt(a);if(47!==u)-1===t&&(o=!1,t=a+1),46===u?-1===e?e=a:1!==i&&(i=1):-1!==e&&(i=-1);else if(!o){r=a+1;break}}return-1===e||-1===t||0===i||1===i&&e===t-1&&e===r+1?"":n.slice(e,t)};var o="b"==="ab".substr(-1)?function(n,e,r){return n.substr(e,r)}:function(n,e,r){return e<0&&(e=n.length+e),n.substr(e,r)}},function(n,e,r){"use strict";r.r(e);var t=r(0),o=r.n(t),i=r(1);console.log({mozjpeg_enc:i}),console.log({wasm:o.a}),function(n,e){var r,t;(r=n,t=e,console.log("moduleFactory:",r,"\nwasmUrl:",t),new Promise(function(n){var e=r({noInitialRun:!0,locateFile:function(n){return n.endsWith(".wasm")?t:n},onRuntimeInitialized:function(){delete e.then,n(e)}})})).then(function(n){console.log("module encode function:",n.encode);for(var e=0;e<2;e++){var r=n.encode(new Uint8ClampedArray([21,31]),100,200,{quality:75,baseline:!1,arithmetic:!1,progressive:!0,optimize_coding:!0,smoothing:0,color_space:3,quant_table:3,trellis_multipass:!1,trellis_opt_zero:!1,trellis_opt_table:!1,trellis_loops:1,auto_subsample:!0,chroma_subsample:2,separate_chroma_quality:!1,chroma_quality:75});console.log("result",r)}})}(i,o.a),console.log("image-processing-worker"),onmessage=function(n){console.log("Worker: Message received from main script",JSON.stringify(n.data)),postMessage("Please write two numbers")}}])});